<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        html,body,div,p{margin: 0; padding: 0;}
        #wrap{width: 550px; overflow: hidden; height:500px; border:1px solid #ccc; margin: 20px auto;}
        #wrap #container{float: left; height: 550px; overflow: hidden; width: 480px; position: relative;}
        #wrap #article{padding: 20px; position: absolute; top : 0;}
        #wrap #article p{text-indent: 2em; padding: 10px;}
        #scroll{ float:right;height: 500px; width: 50px; position: relative; border-left:1px solid #ccc; background: #eee;}
        #scroll #box{height: 50px; width: 50px; background: red; position: absolute; left: 0; top: 0;}
    </style>
</head>
<body>
<div id="wrap">
    <div id="container">
        <div id="article">
            <p>随着用于浏览网页的鼠标滚轮无处不在，一个JavaScript活动让开发人员利用那个“ onmousewheel”事件。顾名思义，只要用户向上或向下旋转鼠标滚轮，此事件就会触发，最常见的是滚动网页。你可能不会经常访问这个事件，不像说"onmouseover"，但对于某些JavaScript应用程序来说，它很自然地可以达到方向盘并给它一个很好的旋转，这个事件就会发生。谷歌地图onmousewheel是一个高调的“动态” 示例，只要用户转动鼠标滚轮，它就可以 放大和缩小地图。你猜测的“我的计划” 将不那么大胆。onmousewheel</p>
            <p>随着用于浏览网页的鼠标滚轮无处不在，一个JavaScript活动让开发人员利用那个“ onmousewheel”事件。顾名思义，只要用户向上或向下旋转鼠标滚轮，此事件就会触发，最常见的是滚动网页。你可能不会经常访问这个事件，不像说"onmouseover"，但对于某些JavaScript应用程序来说，它很自然地可以达到方向盘并给它一个很好的旋转，这个事件就会发生。谷歌地图onmousewheel是一个高调的“动态” 示例，只要用户转动鼠标滚轮，它就可以 放大和缩小地图。你猜测的“我的计划” 将不那么大胆。onmousewheel</p>
            <p>随着用于浏览网页的鼠标滚轮无处不在，一个JavaScript活动让开发人员利用那个“ onmousewheel”事件。顾名思义，只要用户向上或向下旋转鼠标滚轮，此事件就会触发，最常见的是滚动网页。你可能不会经常访问这个事件，不像说"onmouseover"，但对于某些JavaScript应用程序来说，它很自然地可以达到方向盘并给它一个很好的旋转，这个事件就会发生。谷歌地图onmousewheel是一个高调的“动态” 示例，只要用户转动鼠标滚轮，它就可以 放大和缩小地图。你猜测的“我的计划” 将不那么大胆。onmousewheel</p>
            <p>随着用于浏览网页的鼠标滚轮无处不在，一个JavaScript活动让开发人员利用那个“ onmousewheel”事件。顾名思义，只要用户向上或向下旋转鼠标滚轮，此事件就会触发，最常见的是滚动网页。你可能不会经常访问这个事件，不像说"onmouseover"，但对于某些JavaScript应用程序来说，它很自然地可以达到方向盘并给它一个很好的旋转，这个事件就会发生。谷歌地图onmousewheel是一个高调的“动态” 示例，只要用户转动鼠标滚轮，它就可以 放大和缩小地图。你猜测的“我的计划” 将不那么大胆。onmousewheel</p>
            <p>随着用于浏览网页的鼠标滚轮无处不在，一个JavaScript活动让开发人员利用那个“ onmousewheel”事件。顾名思义，只要用户向上或向下旋转鼠标滚轮，此事件就会触发，最常见的是滚动网页。你可能不会经常访问这个事件，不像说"onmouseover"，但对于某些JavaScript应用程序来说，它很自然地可以达到方向盘并给它一个很好的旋转，这个事件就会发生。谷歌地图onmousewheel是一个高调的“动态” 示例，只要用户转动鼠标滚轮，它就可以 放大和缩小地图。你猜测的“我的计划” 将不那么大胆。onmousewheel</p>
            <p>随着用于浏览网页的鼠标滚轮无处不在，一个JavaScript活动让开发人员利用那个“ onmousewheel”事件。顾名思义，只要用户向上或向下旋转鼠标滚轮，此事件就会触发，最常见的是滚动网页。你可能不会经常访问这个事件，不像说"onmouseover"，但对于某些JavaScript应用程序来说，它很自然地可以达到方向盘并给它一个很好的旋转，这个事件就会发生。谷歌地图onmousewheel是一个高调的“动态” 示例，只要用户转动鼠标滚轮，它就可以 放大和缩小地图。你猜测的“我的计划” 将不那么大胆。onmousewheel</p>
            <p>随着用于浏览网页的鼠标滚轮无处不在，一个JavaScript活动让开发人员利用那个“ onmousewheel”事件。顾名思义，只要用户向上或向下旋转鼠标滚轮，此事件就会触发，最常见的是滚动网页。你可能不会经常访问这个事件，不像说"onmouseover"，但对于某些JavaScript应用程序来说，它很自然地可以达到方向盘并给它一个很好的旋转，这个事件就会发生。谷歌地图onmousewheel是一个高调的“动态” 示例，只要用户转动鼠标滚轮，它就可以 放大和缩小地图。你猜测的“我的计划” 将不那么大胆。onmousewheel</p>
            <p>随着用于浏览网页的鼠标滚轮无处不在，一个JavaScript活动让开发人员利用那个“ onmousewheel”事件。顾名思义，只要用户向上或向下旋转鼠标滚轮，此事件就会触发，最常见的是滚动网页。你可能不会经常访问这个事件，不像说"onmouseover"，但对于某些JavaScript应用程序来说，它很自然地可以达到方向盘并给它一个很好的旋转，这个事件就会发生。谷歌地图onmousewheel是一个高调的“动态” 示例，只要用户转动鼠标滚轮，它就可以 放大和缩小地图。你猜测的“我的计划” 将不那么大胆。onmousewheel</p>
            <p>随着用于浏览网页的鼠标滚轮无处不在，一个JavaScript活动让开发人员利用那个“ onmousewheel”事件。顾名思义，只要用户向上或向下旋转鼠标滚轮，此事件就会触发，最常见的是滚动网页。你可能不会经常访问这个事件，不像说"onmouseover"，但对于某些JavaScript应用程序来说，它很自然地可以达到方向盘并给它一个很好的旋转，这个事件就会发生。谷歌地图onmousewheel是一个高调的“动态” 示例，只要用户转动鼠标滚轮，它就可以 放大和缩小地图。你猜测的“我的计划” 将不那么大胆。onmousewheel</p>
            <p>随着用于浏览网页的鼠标滚轮无处不在，一个JavaScript活动让开发人员利用那个“ onmousewheel”事件。顾名思义，只要用户向上或向下旋转鼠标滚轮，此事件就会触发，最常见的是滚动网页。你可能不会经常访问这个事件，不像说"onmouseover"，但对于某些JavaScript应用程序来说，它很自然地可以达到方向盘并给它一个很好的旋转，这个事件就会发生。谷歌地图onmousewheel是一个高调的“动态” 示例，只要用户转动鼠标滚轮，它就可以 放大和缩小地图。你猜测的“我的计划” 将不那么大胆。onmousewheel</p>
            <p>随着用于浏览网页的鼠标滚轮无处不在，一个JavaScript活动让开发人员利用那个“ onmousewheel”事件。顾名思义，只要用户向上或向下旋转鼠标滚轮，此事件就会触发，最常见的是滚动网页。你可能不会经常访问这个事件，不像说"onmouseover"，但对于某些JavaScript应用程序来说，它很自然地可以达到方向盘并给它一个很好的旋转，这个事件就会发生。谷歌地图onmousewheel是一个高调的“动态” 示例，只要用户转动鼠标滚轮，它就可以 放大和缩小地图。你猜测的“我的计划” 将不那么大胆。onmousewheel</p>
            <p>随着用于浏览网页的鼠标滚轮无处不在，一个JavaScript活动让开发人员利用那个“ onmousewheel”事件。顾名思义，只要用户向上或向下旋转鼠标滚轮，此事件就会触发，最常见的是滚动网页。你可能不会经常访问这个事件，不像说"onmouseover"，但对于某些JavaScript应用程序来说，它很自然地可以达到方向盘并给它一个很好的旋转，这个事件就会发生。谷歌地图onmousewheel是一个高调的“动态” 示例，只要用户转动鼠标滚轮，它就可以 放大和缩小地图。你猜测的“我的计划” 将不那么大胆。onmousewheel</p>
        </div>
    </div>
    <div id="scroll">
        <div id="box"></div>
    </div>
</div>


</body>
</html>
<script>

    var oBox = document.getElementById("box");
    var oWrap = document.getElementById("wrap");
    var oScroll = document.getElementById("scroll");
    var oArticle = document.getElementById("article");
    //滚动事件兼容
    var mousewheelevt=(/Firefox/i.test(navigator.userAgent))? "DOMMouseScroll" : "mousewheel" //FF doesn't recognize mousewheel as of FF3.x
    //事件绑定
    function addEvent(obj, type, fn) {
        if (obj.addEventListener) {
            obj.addEventListener(type, fn);
        } else if (obj.attachEvent) {
            obj.attachEvent('on' + type, fn);
        }
    }
    //滚动条滚动方向兼容
    function getWD(e) {
        var e = e || window.event;
        if(e.wheelDelta){
            return e.wheelDelta;
        }else{
            return -e.detail * 40;
        }
    }
    var step = 0;
    var num = 0;
    var a = (oArticle.offsetHeight - oWrap.offsetHeight)/45;
    addEvent(oScroll, mousewheelevt,function (e) {
        if(getWD(e) == -120){
            step+=10;
            console.log(step)
            if(step > 450){
                step = 450;
            }
            num+=a;
            if(num  > oArticle.offsetHeight - oWrap.offsetHeight){
                num = oArticle.offsetHeight - oWrap.offsetHeight;
            }
            oArticle.style.top = -num + "px";
            oBox.style.top = step + "px";
        }else{
            step-=10;
            if(step<0){
                step = 0;
            }
            num-=a;
            if(num  > oArticle.offsetHeight - oWrap.offsetHeight){
                num = oArticle.offsetHeight - oWrap.offsetHeight;
            }
            if(num < 0){
                num = 0;
            }
            oArticle.style.top = -num + "px";
            oBox.style.top = step + "px";
        }
    });

</script>
